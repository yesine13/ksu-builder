name: Patch A50 Mint Kernel Final
on:
  workflow_dispatch:

jobs:
  patch:
    runs-on: ubuntu-latest
    steps:
      - name: Install Tools
        run: sudo apt-get update && sudo apt-get install -y git zip wget

      - name: Download Mint Beta Image
        run: |
          # سنحاول تحميل ملف الكرنل مباشرة من السورس الموثوق
          wget https://github.com/FreshROMs/android_kernel_samsung_exynos9610_mint/raw/xbeta/arch/arm64/boot/Image.gz-dtb -O Image.gz-dtb

      - name: Prepare Flashable ZIP
        run: |
          git clone --depth=1 https://github.com/osm0sis/AnyKernel3.git
          mv Image.gz-dtb AnyKernel3/
          cd AnyKernel3
          # تعديل ملف الإعدادات ليتناسب مع A50
          sed -i 's/do.devicecheck=1/do.devicecheck=0/g' anykernel.sh
          zip -r9 ../A50-Mint-KSU-Ready.zip *

      - name: Upload Result
        uses: actions/upload-artifact@v4
        with:
          name: A50-Mint-Kernel-ZIP
          path: A50-Mint-KSU-Ready.zip
